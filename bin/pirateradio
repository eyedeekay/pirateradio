#! /usr/bin/env sh

# A POSIX variable
OPTIND=1         # Reset in case getopts has been used previously in the shell.

# Initialize our own variables:
output_file=""
verbose=0

random="$(cat /dev/urandom | base64 | head -c 5)"
station="$random"
music_dir="$random/music"
playlist_dir="$random/playlist"
tag_cache="$random/tag_cache"

while getopts "h?s:m:p:t:i:" opt; do
    case "$opt" in
    h|\?)
        make usage
        exit 0
        ;;
    s)
        station="$(pwd)/$OPTARG"; export station="$(pwd)/$OPTARG"
        ;;
    m)
        music_dir="$(pwd)/$OPTARG"; export music_dir="$(pwd)/$OPTARG"
        ;;
    p)
        playlist_dir="$(pwd)/$OPTARG"; export playlist_dir="$(pwd)/$OPTARG"
        ;;
    t)
        tag_cache="$(pwd)/$OPTARG"; export tag_cache="$(pwd)/$OPTARG"
        ;;
    esac
done

shift $((OPTIND-1))

[ "$1" = "--" ] && shift

usage(){
echo "
Create a pirateradio station
============================

random options will be chosen for unset variables.

    -s : set station
        station='$station',
    -m : set directory to look for music files
        music_dir='$music_dir',
    -p : set directory to look for and save playlists
        playlist_dir='$playlist_dir',
    -t : set directory for storing the mpd tag cache(any empty directory will do.)
        tag_cache='$tag_cache',

    Leftovers: $@"
}

usage

#make tunconf
#make install
